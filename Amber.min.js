/*! amber - v0.1.0 - 2014-02-19 */!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["lodash","jquery","exports"],function(c,d,e){a.Amber=b(a,e,c,d)}):a.Amber=b(a,{},a._,a.jQuery||a.$)}(this,function(a,b,c,d){"use strict";b.VERSION="0.2.0",b.$=d,b.Supports={tests:{svg:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},draganddrop:function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},touch:function(){return"ontouchstart"in window||"onmsgesturechange"in window},cssanimations:function(){var a,b=document.body||document.documentElement,c=b.style,d="transition";if("string"==typeof c[d])return!0;a=["Moz","webkit","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0,f=a.length;f>e;e++)if("string"==typeof c[a[e]+d])return!0;return!1},animationframes:function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"];return!!window.requestAnimationFrame}},initialize:function(){for(var a in this.tests)this[a]=c.result(this.tests,a);return this}}.initialize(),b.Format={numberWithCommas:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},stripTrailingZero:function(a){return a.toString().replace(/\.0/,"")},basicPluralize:function(a,b){return isNaN(b)||0>b?void 0:1===b?a:b>1?a+"s":void 0}},b.Browser={iOS:!!navigator.userAgent.match(/iPad|iPhone|iPod/gi),iPhone:!!navigator.userAgent.match(/iPhone/gi),iPad:!!navigator.userAgent.match(/iPad/gi),android:!!navigator.userAgent.match(/Android/gi),blackberry:!!navigator.userAgent.match(/BlackBerry/gi),iemobile:!!navigator.userAgent.match(/IEMobile/gi),firefox:!!navigator.userAgent.match(/Firefox/gi),chrome:!!navigator.userAgent.match(/Chrome/gi),safari:!!navigator.userAgent.match(/(Version\/\d\.\d.*Safari)/gi),ie:navigator.userAgent.match(/MSIE\s([0-9]{1,}[\.0-9]{0,})/gi)||!1,initialize:function(){return this.mobile=this.iOS||this.android||this.blackberry||this.iemobile,this}}.initialize();var e=b.Events={delegateEventSplitter:/^(\S+)\s*(.*)$/,undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){this.undelegateEvents();for(var a in this.events){var b=this[this.events[a]];b=c.bind(b,this);var d=a.match(this.delegateEventSplitter),e=d[1],f=d[2];e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,b):this.$el.on(e,f,b)}return this},on:function(a,b,c){if(!g(this,"on",a,[b,c])||!b)return this;this._events=this._events||{};var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!g(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,h,i,j,k,l,m;if(!this._events||!g(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(i=a?[a]:c.keys(this._events),j=0,k=i.length;k>j;j++)if(a=i[j],h==this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=h.length;m>l;l++)f=h[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=[].slice.call(arguments,1);if(!g(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&h(c,b),d&&h(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this},_ensureElement:function(){if(this.$el)this.setElement(c.result(this,"$el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}},f=/\s+/,g=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(f.test(c)){for(var g=c.split(f),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},h=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},i=function(){this.cid=c.uniqueId("vent")};c.extend(i.prototype,e),b.Vent=new i,b.Views={_views:[],_add:function(a){this._views.push(a)},get:function(a){return c.find(this._views,function(b){return b.cid===a})},all:function(){return this._views}};var j=b.Model=function(a,b){this.cid=c.uniqueId("model"),b=b||{},c.extend(this,b);var d=a||{};this.attributes=c.defaults({},d,c.result(this,"defaults")),this.initialize.apply(this,arguments)};c.extend(j.prototype,e,{defaults:{},initialize:function(){},toJSON:function(){return c.clone(this.attributes)},get:function(a){return this.attributes[a]},has:function(a){return null!==this.get(a)&&"undefined"!=typeof this.get(a)},sync:function(){return b.sync.apply(this,arguments)},set:function(a,b,d){var e,f,g,h,i,j;if(null===a||"undefined"==typeof a)return this;"object"==typeof a?(f=a,d=b):(f={})[a]=b,d=d||{},g=d.unset,i=d.silent,h=[],j=this.attributes;for(e in f)b=f[e],c.isEqual(j[e],b)||h.push(e),g?delete j[e]:j[e]=b;if(!i&&(this.trigger("change",this,d),h.length))for(var k=0,l=h.length;l>k;k++)this.trigger("change:"+h[k],this,j[h[k]],d);return this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},fetch:function(a){a=a?c.clone(a):{};var b=this,d=a.success;a.success=function(c){d&&(b.set(c,a),d(b,c,a)),b.trigger("sync",b,c,a)};var e=a.complete;a.complete=function(c){e&&e(b,c,a)};var f=a.error;return a.error=function(c){f&&f(b,c,a)},this.sync("GET",this,a)}}),b.sync=function(a,d,e){var f={type:a,dataType:"json"};e.url||(f.url=c.result(d,"url")||k());var g=e.xhr=b.ajax(c.extend(f,e));return d.trigger("request",d,g,e),g},b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var k=function(){throw new Error('A "url" property or function must be specified')},l=b.View=function(a){this.cid=c.uniqueId("view"),b.Views._add(this),a=a||{},c.extend(this,a),this._ensureElement(),this.initialize.apply(this,arguments),this.trigger("after:initialize"),this.delegateEvents()};c.extend(l.prototype,e,{tagName:"div",template:"",events:{},model:{},initialize:function(){},format:function(){return this},render:function(){this.trigger("before:render");var a={};return a=this.model instanceof b.Model?this.model.toJSON():this.model||{},this.$el.html(c.template(this.template,a)),this.trigger("after:render"),this},$:function(a){return this.$el.find(a)},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this}});var m=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};l.extend=j.extend=m,b.scrollTo=function(a,c){a=a instanceof b.$?a:b.$(a),c=c||{},c.offset=c.offset||0,c.duration=c.duration||500,c.easing=c.easing||"easeInOutExpo",b.$("html, body").stop().animate({scrollTop:a.offset().top-c.offset},c.duration,c.easing)};var n=b.AnimateIn=function(a,b){this.el=a,this.options=m(this.defaults,b),this._init()};/*!
	 *
	 * TERMS OF USE - EASING EQUATIONS
	 *
	 * Open source under the BSD License.
	 *
	 * Copyright Â© 2001 Robert Penner
	 * All rights reserved.
	 *
	 * Redistribution and use in source and binary forms, with or without modification,
	 * are permitted provided that the following conditions are met:
	 *
	 * Redistributions of source code must retain the above copyright notice, this list of
	 * conditions and the following disclaimer.
	 * Redistributions in binary form must reproduce the above copyright notice, this list
	 * of conditions and the following disclaimer in the documentation and/or other materials
	 * provided with the distribution.
	 *
	 * Neither the name of the author nor the names of contributors may be used to endorse
	 * or promote products derived from this software without specific prior written permission.
	 *
	 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
	 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
	 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
	 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
	 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
	 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
	 * OF THE POSSIBILITY OF SUCH DAMAGE.
	 *
	 */
return n.prototype={defaults:{viewportFactor:.2},docElem:window.document.documentElement,getViewportHeight:function(){var a=this.docElem.clientHeight,b=window.innerHeight;return b>a?b:a},getOffset:function(a){var b=0,c=0;do isNaN(a.offsetTop)||(b+=a.offsetTop),isNaN(a.offsetLeft)||(c+=a.offsetLeft);while(a==a.offsetParent);return{top:b,left:c}},inViewport:function(a,b){var c=a.offsetHeight,d=window.pageYOffset||this.docElem.scrollTop,e=d+this.getViewportHeight(),f=this.getOffset(a).top,g=f+c;return b=b||0,e>=f+c*b&&g>=d},_init:function(){if(!Modernizr.touch){this.sections=Array.prototype.slice.call(this.el.querySelectorAll(".amber-animate-section")),this.didScroll=!1;var a=this;this.sections.forEach(function(b){a.inViewport(b)||d(b).addClass("amber-animate-section-init")});var b=function(){a.didScroll||(a.didScroll=!0,setTimeout(function(){a._scrollPage()},100))},c=function(){function b(){a._scrollPage(),a.resizeTimeout=null}a.resizeTimeout&&clearTimeout(a.resizeTimeout),a.resizeTimeout=setTimeout(b,200)};window.addEventListener("scroll",b,!1),window.addEventListener("resize",c,!1)}},_scrollPage:function(){var a=this;this.sections.forEach(function(b){a.inViewport(b,a.options.viewportFactor)?d(b).addClass("amber-animate-section-animate"):(d(b).addClass("amber-animate-section-init"),d(b).removeClass("amber-animate-section-animate"))}),this.didScroll=!1}},b.Preload=function(a,b){var d,e,f,g;"string"==typeof a&&(a=[a]),b=b||{},d=[],e=0,f=b.progress,g=b.done;var h=function(){e++,f&&f(e/a.length,e,a.length,d[d.length-1]),e===a.length&&b.done&&b.done(d)};c.each(a,function(a){var b=new Image;b.src=a,b.onload=h,b.onerror=h,d.push(b)})},b.$.easing.jswing=b.$.easing.swing,b.$.extend(b.$.easing,{def:"easeOutQuad",swing:function(a,c,d,e,f){return b.$.easing[b.$.easing.def](a,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0===b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0===b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:1==(b/=e)?c+d:(g||(g=.3*e),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c)},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:1==(b/=e)?c+d:(g||(g=.3*e),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c)},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:2==(b/=e/2)?c+d:(g||(g=.3*e*1.5),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c)},easeInBack:function(a,b,c,d,e,f){return"undefined"==typeof f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return"undefined"==typeof f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return"undefined"==typeof f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,c,d,e,f){return e-b.$.easing.easeOutBounce(a,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,c,d,e,f){return f/2>c?.5*b.$.easing.easeInBounce(a,2*c,0,e,f)+d:.5*b.$.easing.easeOutBounce(a,2*c-f,0,e,f)+.5*e+d}}),b});