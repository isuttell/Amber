/*!
 * amber> v0.5.0> - https://github.com/isuttell/Amber
 * A View system for javascript applications
 * Contributor(s): Isaac Suttell <isaac@isaacsuttell.com>
 */

!function(a,b){var c=function(){};"function"==typeof define&&define.amd?define(["jquery","exports"],function(d){return b(a,new c,d)}):"undefined"!=typeof module&&module.exports?module.exports=b(a,new c):a.Amber=b(a,new c,a.jQuery||a.$)}(this,function(a,b,c){"undefined"!=typeof module&&module.exports&&(c=require("jquery")),b.$=c,b.VERSION="0.6.0",b.define=function(a,c,d,e){"[object Function]"==={}.toString.call(c)&&(d=c,c=[]),b._modules=b._modules||[],b._modules.push({extend:e,name:a,deps:c,fn:d})},b.View=function(a,c,d){"[object Function]"==={}.toString.call(c)&&(d=c,c=[]),b.define(a,c,d,"View")},b.define("Utilities",function(){var a=function(a,b){return{}.toString.call(a)==="[object "+b+"]"},b=function(b){return a(b,"Object")},c=function(b){return a(b,"String")},d=function(b){return a(b,"Function")},e=function(b){return a(b,"Object")||a(b,"Function")},f=function(a,b){var c,e;if(!d(a))throw new Error("fn isn't a function");return function(){return c?e:(c=!0,e=a.apply(b||this,arguments),a=null,e)}},g=function(a,c,e){if(d(a[c])){var f=Array.prototype.slice.call(arguments).slice(3);return a[c].apply(e||this,f)}return b(a)?a[c]:a},h=function(a){var b=a;if(!e(b))return b;for(var c=arguments.length,d=0;++d<c;){var f=arguments[d];if(e(f))for(var g=-1,h=i(f),j=h.length;++g<j;){var k=h[g];b[k]=f[k]}}return b},i=function(a){var c,d=[];if(!b(a))return a;for(c in a)a.hasOwnProperty(c)&&d.push(c);return d},j=function(a){var c,d=[];if(!b(a))return a;for(c in a)a.hasOwnProperty(c)&&d.push(a[c]);return d},k=function(a,b){return!!a[b]},l=0,m=function(a){return(a||"id")+ ++l},n=function(a){return a.complete?"undefined"!=typeof a.naturalWidth&&0===a.naturalWidth?!1:!0:!1};return{uniqueId:m,has:k,keys:i,values:j,isObject:b,isString:c,isFunction:d,isIterable:e,runOnce:f,results:g,assign:h,isImageLoaded:n}}),b.define("extend",["Utilities"],function(a){var b=function(c,d){var e=this,f=function(){return e.apply(this,arguments)};a.assign(f,e,d);var g=function(){this.constructor=f};return g.prototype=e.prototype,f.prototype=new g,c&&a.assign(f.prototype,c),f.extend=b,f};return b}),b.define("View",["Utilities","extend"],function(a,c){function d(b){this.id=a.uniqueId("view"),a.assign(this,b||{}),this._ensureElement(),this.init.apply(this,arguments),this.delegateEvents()}var e=/^(\S+)\s*(.*)$/;return a.assign(d.prototype,{tagName:"div",template:"",events:{},model:{},init:function(){},render:function(){var b={};return b=this.model||{},this.$el.html(a.template(this.template,b)),this},$:function(a){return this.$el.find(a)},remove:function(){return this.$el.remove(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c===!0&&this.delegateEvents(),this},_ensureElement:function(){if(this.$el)this.setElement(a.results(this,"$el"),!1);else{var c=a.assign({},a.results(this,"attributes"));this.id&&(c.id=a.results(this,"id")),this.className&&(c["class"]=a.results(this,"className"));var d=b.$("<"+a.results(this,"tagName")+">").attr(c);this.setElement(d,!1)}},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){if(!this.el)return this;this.undelegateEvents();for(var b in this.events)if(this.events.hasOwnProperty(b)){var c=this[this.events[b]];c=a.bind(c,this);var d=b.match(e),f=d[1],g=d[2];f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,c):this.$el.on(f,g,c)}return this}}),d.extend=c,d}),b.define("Supports",["Utilities"],function(a){function b(){for(var b in this.$$tests)this.$$tests.hasOwnProperty(b)&&(this[b]=a.results(this.$$tests,b));return this}var c={$$tests:{svg:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},draganddrop:function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},touch:function(){return"ontouchstart"in window||"onmsgesturechange"in window},cssanimations:function(){var b,c=document.body||document.documentElement,d=c.style,e="transition";if(a.isString(d[e]))return!0;b=["Moz","webkit","Webkit","Khtml","O","ms"],e=e.charAt(0).toUpperCase()+e.substr(1);for(var f=0,g=b.length;g>f;f++)if(a.isString(d[b[f]+e]))return!0;return!1},animationframes:function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"];return!!window.requestAnimationFrame}}};return b.call(c)}),b.define("Browser",function(){var a={iOS:null,iPhone:null,iPad:null,android:null,blackberry:null,iemobile:null,firefox:null,chrome:null,safari:null,ie:null,mobile:null,$$check:function(a){return this.iOS=!!a.match(/iPad|iPhone|iPod/i),this.iPhone=!!a.match(/iPhone/i),this.iPad=!!a.match(/iPad/i),this.android=!!a.match(/Android/i),this.blackberry=!!a.match(/BlackBerry/i),this.iemobile=!!a.match(/IEMobile/i),this.firefox=!!a.match(/Firefox/i),this.chrome=!!a.match(/Chrome/i),this.safari=!!a.match(/(Version\/\d\.\d.*Safari)/i),this.ie=a.match(/MSIE\s([0-9]{1,}[\.0-9]{0,})/i)||!1,this.mobile=this.iOS||this.android||this.blackberry||this.iemobile,this.ie&&(this.ie=Math.floor(this.ie[1])),this}};return a.$$check(navigator.userAgent)}),b.inject=function(a,c){for(var d=a.length;--d>=0;)a[d]=b.$$modules[a[d]];c.apply(b,a)},b.define("jQuery",function(){return b.$||c}),b.define("$window",function(){return window});var d=function(a,b){for(var c=[],d=a.length;--d>=0;)c.push(a[d].name);for(d in b)c.push(d);return c},e=function(a,b){this.create=function(c){for(var d=!0,e=c.deps?c.deps.length:0;--e>=0;){if(-1===a.indexOf(c.deps[e]))throw new Error("Unable to find module: "+c.deps[e]);"undefined"!=typeof b[c.deps[e]]?c.deps[e]=b[c.deps[e]]:"undefined"!=typeof window[c.deps[e]]?c.deps[e]=window[c.deps[e]]:d=!1}return d?c:!1}};return b.run=function(a,c){"function"==typeof a&&(c=a,a=[]);var f=b._modules;delete b._modules,b.$$modules=b.$$modules||{};for(var g=b.$$modules,h=d(f,g),i=h.length*h.length,j=new e(h,g),k=-1;++k<f.length;){var l=j.create(f[k]);if(l&&"undefined"!=typeof l.extend&&g[l.extend]?g[l.name]=g[l.extend].extend(l.fn.apply(b,l.deps)):l&&"undefined"==typeof l.extend?g[l.name]=l.fn.apply(b,l.deps):f.push(f[k]),f[k]=void 0,k>=i)throw new Error("Unable to resolve dependencies")}"function"==typeof c&&b.inject(a,c)},b.run(),b});